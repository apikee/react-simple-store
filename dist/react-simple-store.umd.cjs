(function(t,s){typeof exports=="object"&&typeof module<"u"?s(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],s):(t=typeof globalThis<"u"?globalThis:t||self,s(t["react-simple-store"]={},t.react))})(this,function(t,s){"use strict";const d=(n,r)=>{if(!n)throw new Error(r||"Assertion failed")},m=n=>{d(typeof n=="object"&&!Array.isArray(n)&&n!==null,"react-simple-store: default value has to be object");const r="react-simple-store-set";let c=n;const b=e=>{document.dispatchEvent(new CustomEvent(r,{detail:{changes:e}}))},f=e=>{d(typeof e=="object"&&!Array.isArray(e)&&e!==null,"react-simple-store: new value has to be object"),c={...c,...e},b(e)},h=()=>({...c,_set:f}),p=e=>new Proxy(h(),{get(i,a){return e(a),i[a]}});return{get:()=>c,set:f,useStore:()=>{const e=[],i=o=>{e.includes(o)||e.push(o)},[a,j]=s.useState(p(i)),_=o=>{const{changes:u}=o,y={};for(let l of Object.keys(u))e.includes(l)&&(y[l]=u[l]);Object.keys(y).length>0&&j(p(i))};return s.useEffect(()=>{document.addEventListener(r,o=>{const{detail:u}=o;_(u)})},[]),a}}};t.simpleStore=m,Object.defineProperties(t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
